---
title: "Demonstration of CREA R package (WIP)"
output: html_notebook
---

Installing package

```{r}
install.packages('devtools')
library(devtools)
url <- "https://gitlab.com/creaaq/crea_r_package"
devtools::install_git(url = url)
```
```{r}
library(creadb)
library(dplyr)
library(ggplot2)
library(zoo)
```

Getting data for Delhi and Mumbai. By default, data is averaged by day.
```{r}
meas_cities <- creadb::measurements(city=c('Jaipur','Mumbai'), date_from='2015-01-01')
meas_cities
```

Plotting time series of PM 2.5 per location.

Using location_id...
```{r}
creadb::plot_measurements(meas_cities, poll=creadb::PM25, subplot_by='location_id')
```
... or location name
```{r}
creadb::plot_measurements(meas_cities, poll=creadb::PM25, subplot_by='location')
```

Plotting city-level values per pollutant
```{r}
creadb::plot_measurements(meas_cities, subplot_by='poll')
```
Using a 1-year rolling mean
```{r}
creadb::plot_measurements(meas_cities, running_days=365, subplot_by='poll')
```

Time series of PM2.5 per location (yearly running average)
```{r}
creadb::plot_measurements(meas_cities, poll=creadb::PM25, running_days=365, subplot_by='location')
```

Time series of PM2.5 per city (yearly running average)
```{r}
creadb::plot_measurements(meas_cities, poll=creadb::PM25, running_days=365, color_by='city')
```

Monthly average
```{r}
creadb::plot_measurements(meas_cities, poll=creadb::PM25, average_by='month', subplot_by='city')
```

Yearly average
```{r}
creadb::plot_measurements(meas_cities, poll=creadb::PM25, average_by='year', subplot_by='city')
```

Heatmap per location with monthly data
```{r}
creadb::plot_measurements(meas_cities, poll=PM25, subplot_by='location', type='heatmap', average_by='month')
```

Heatmap per city weekly values
```{r}
creadb::plot_measurements(meas_cities, poll=PM25, subplot_by='city', type='heatmap', average_by='month')
```
